From 96e41af951dfe2e0870965c1d0e8574426ce74b4 Mon Sep 17 00:00:00 2001
From: Michael Walle <michael.walle@kontron.com>
Date: Fri, 5 Apr 2019 15:43:39 +0200
Subject: [PATCH] enetc: provide phy read/write ioctls

Signed-off-by: Michael Walle <michael.walle@kontron.com>
---
 drivers/net/ethernet/freescale/enetc/enetc.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/freescale/enetc/enetc.c b/drivers/net/ethernet/freescale/enetc/enetc.c
index 1db4cf0dce7a..bc690636534b 100644
--- a/drivers/net/ethernet/freescale/enetc/enetc.c
+++ b/drivers/net/ethernet/freescale/enetc/enetc.c
@@ -1539,7 +1539,9 @@ int enetc_ioctl(struct net_device *dev, struct ifreq *rq, int cmd)
 		return enetc_hwtstamp_get(dev, rq);
 #endif
 
-	return -EINVAL;
+	if (!dev->phydev)
+		return -EINVAL;
+	return phy_mii_ioctl(dev->phydev, rq, cmd);
 }
 
 int enetc_alloc_msix(struct enetc_ndev_priv *priv)
-- 
2.11.0

